# feat-py

Cross-language feature documentation tool for analyzing and documenting public API surfaces across Rust, Python, and other languages.

## What is feat?

`feat` is a lightweight tool that automatically discovers, inspects, and documents the public API surface of features in your codebase. It uses regex-based parsing to extract public items (functions, structs, classes, etc.) and maintains synchronized documentation using sentinel blocks in markdown files.

## Quick Start

```bash
# Install to local bin
cd ~/repos/code/python/snekfx/feat-py
bin/deploy.sh

# Initialize in your project
cd /path/to/your/project
feat init

# List discovered features
feat list

# Inspect a feature's public API
feat scan global

# Update feature documentation
feat update global

# Sync all feature docs
feat sync
```

## Key Features

- **Language Support**: Rust, Python (TypeScript stub available)
- **Auto-Discovery**: Automatically finds features from your source tree
- **Smart Documentation**: Updates sentinel blocks in markdown files
- **Flexible Configuration**: Uses `.feat.toml` for customization
- **Repository-Agnostic**: Works from any directory in your project

## Documentation

See [docs/USING_FEAT.md](docs/USING_FEAT.md) for complete usage guide and examples.

Example feature documentation files can be found in [docs/examples/](docs/examples/).

## Configuration

Place a `.feat.toml` in your repository root:

```toml
features_root = "src"
docs_root = "docs/features"
doc_pattern = "FEATURES_{FEATURE}.md"
languages = ["rust"]
auto_discover = true

exclude = [
    "**/tests/**",
    "**/target/**",
]

[features]
# Explicit mappings override auto-discovery
global = ["src/global"]
```

## Usage Examples

```bash
# Generate config
feat init

# List features with details
feat list --verbose

# Scan feature with JSON output
feat scan global --format json

# Update specific feature doc
feat update global --doc path/to/doc.md

# Sync all docs (dry run first)
feat sync --dry-run
feat sync

# Check for issues
feat check --missing-docs
```

## Installation from Source

```bash
# Using pyproject.toml
pip install -e .

# Or use the deploy script
bin/deploy.sh
```

## How It Works

1. Detects repository root (looks for `.git`, `Cargo.toml`, etc.)
2. Loads `.feat.toml` configuration or uses defaults
3. Discovers features from source tree or explicit mappings
4. Parses source files using language-specific regex patterns
5. Generates/updates documentation using sentinel blocks

## Documentation Workflow

Feature docs use sentinel blocks for automatic updates:

```markdown
<!-- feat:global -->

_Generated by feat.py._

* `src/global/mod.rs`
  - fn init (line 10)
  - struct Config (line 5)

<!-- /feat:global -->
```

Manual documentation can be added outside these blocks.

## License

MIT License - see [LICENSE](LICENSE) file.

## Related Tools

- [blade-py](../blade-py/) - Rust dependency management tool
- RSB Module Specifications - Project-specific patterns

## Development

```bash
# Run tests (if available)
pytest

# Deploy locally
bin/deploy.sh
```
